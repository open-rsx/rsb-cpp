
ENABLE_TESTING()

INCLUDE_DIRECTORIES(BEFORE ../src ${GTEST_INCLUDE_DIR} ${GMOCK_INCLUDE_DIR} ${CMAKE_CURRENT_BINARY_DIR})

# --- RSB (integration) test ---

SET(RSB_TEST_SOURCES RSBTest.cpp  ${GENERIC_TEST_SOURCES})
SET(RSB_TEST_NAME rsb_test)

ADD_EXECUTABLE(${RSB_TEST_NAME} ${RSB_TEST_SOURCES})
TARGET_LINK_LIBRARIES(${RSB_TEST_NAME}
                      ${LIBNAME}
                      ${Boost_LIBRARIES}
                      ${GMOCK_LIBRARY_NAME})

ADD_TEST(${RSB_TEST_NAME} ${RSB_TEST_NAME})

# --- core test ---

#SET(GENERIC_TEST_SOURCES InformerTask.cpp)
SET(GENERIC_TEST_SOURCES )
SET(CORE_TEST_SOURCES TaskTest.cpp FilterObserverTest.cpp ${GENERIC_TEST_SOURCES})
SET(CORE_TEST_NAME rsb_test_tasks)

ADD_EXECUTABLE(${CORE_TEST_NAME} ${CORE_TEST_SOURCES})
TARGET_LINK_LIBRARIES(${CORE_TEST_NAME}
                      ${LIBNAME}
                      ${Boost_LIBRARIES}
                      ${GMOCK_LIBRARY_NAME})

ADD_TEST(${CORE_TEST_NAME} ${CORE_TEST_NAME})

# --- spreadport test ---

SET(SPREADPORT_TEST_SOURCES SpreadPortTest.cpp MembershipManagerTest.cpp ${GENERIC_TEST_SOURCES})
SET(SPREADPORT_TEST_NAME rsb_test_spread)

ADD_EXECUTABLE(${SPREADPORT_TEST_NAME} ${SPREADPORT_TEST_SOURCES})
TARGET_LINK_LIBRARIES(${SPREADPORT_TEST_NAME}
                      ${LIBNAME}
                      ${Boost_LIBRARIES}
                      ${GMOCK_LIBRARY_NAME})

ADD_TEST(${SPREADPORT_TEST_NAME} ${SPREADPORT_TEST_NAME})

