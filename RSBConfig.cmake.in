IF(NOT RSB_CONFIG_PROCESSED)
    SET(RSB_CONFIG_PROCESSED TRUE)

    GET_FILENAME_COMPONENT(RSB_CONFIG_DIR "${CMAKE_CURRENT_LIST_FILE}" PATH)

    IF(EXISTS "${RSB_CONFIG_DIR}/CMakeCache.txt")
        INCLUDE("${RSB_CONFIG_DIR}/RSBBuildTreeSettings.cmake")
    ELSE()
        SET(RSB_INCLUDE_DIRS "${RSB_CONFIG_DIR}/../../include/@INSTALL_PATH_PREFIX@" ${RSC_INCLUDE_DIRS})
        SET(RSB_RUNTIME_LIBRARY_DIRS "${RSB_CONFIG_DIR}/../../bin" ${RSC_RUNTIME_LIBRARY_DIRS})
    ENDIF()

    SET(RSC_DIR "@RSC_DIR_FOR_CONFIG@" CACHE PATH "RSC location")
    FIND_PACKAGE(RSC "@RSB_VERSION_MAJOR@.@RSB_VERSION_MINOR@" REQUIRED)
    LIST(APPEND RSB_INCLUDE_DIRS ${RSC_INCLUDE_DIRS})

    INCLUDE("${RSB_CONFIG_DIR}/RSBDepends.cmake")
    SET(RSB_LIBRARIES @RSB_NAME@)

    SET(RSB_PROTOCOL_CFLAGS "@RSB_PROTOCOL_CFLAGS@")
    SET(RSB_PROTOCOL_VERSION "@RSB_PROTOCOL_VERSION@")

ENDIF()
